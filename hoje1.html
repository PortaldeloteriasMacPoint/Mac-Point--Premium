<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Relatório do Concurso</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      background-color: #f4f4f4;
    }
    h2 {
      text-align: center;
    }
    .resultados, .relatorio {
      margin-top: 20px;
      padding: 20px;
      background-color: #fff;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }
    .bolas {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      justify-content: center;
    }
    .bola {
      width: 50px;
      height: 50px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      color: white;
    }
    .relatorio ul {
      list-style-type: none;
      padding: 0;
    }
    .relatorio li {
      margin-bottom: 10px;
    }
    .volante {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-top: 20px;
    }
    .coluna {
      display: flex;
      flex-direction: column;
      align-items: center;
    }
  </style>
</head>
<body>
  <h2>Relatório do Sorteio</h2>
  <div class="resultados">
    <label for="concurso">Número do Concurso:</label>
    <input type="number" id="concurso" placeholder="Exemplo: 34" />
    <button id="buscar">Buscar</button>
    <div class="bolas" id="bolas"></div>
  </div>

  <div class="relatorio" id="relatorio"></div>

  <script>
    document.getElementById('buscar').addEventListener('click', function() {
      let concurso = document.getElementById('concurso').value;
      fetch(`https://premium-portaldeloteriasmacpoint.onrender.com/api.php?concurso=${concurso}`)
        .then(response => response.json())
        .then(data => {
          if (data && data.numeros) {
            // Exibindo os números sorteados nas bolas coloridas
            const bolasContainer = document.getElementById('bolas');
            bolasContainer.innerHTML = ''; // Limpa o conteúdo anterior
            data.numeros.forEach(numero => {
              const bola = document.createElement('div');
              bola.className = 'bola';
              bola.style.backgroundColor = `hsl(${numero * 10}, 100%, 50%)`; // Cor personalizada
              bola.textContent = numero;
              bolasContainer.appendChild(bola);
            });

            // Criando o relatório detalhado
            const relatorioContainer = document.getElementById('relatorio');
            const repeticoes = {};
            const intervalos = [0, 0, 0, 0, 0, 0];
            const saidaPorColuna = [0, 0, 0, 0, 0];

            // Analisando os números sorteados
            data.numeros.forEach(numero => {
              // Contagem de repetição
              repeticoes[numero] = (repeticoes[numero] || 0) + 1;

              // Intervalos (1-10, 11-20, etc.)
              if (numero >= 1 && numero <= 10) intervalos[0]++;
              else if (numero >= 11 && numero <= 20) intervalos[1]++;
              else if (numero >= 21 && numero <= 30) intervalos[2]++;
              else if (numero >= 31 && numero <= 40) intervalos[3]++;
              else if (numero >= 41 && numero <= 50) intervalos[4]++;
              else if (numero >= 51 && numero <= 60) intervalos[5]++;

              // Distribuição por coluna (exemplo fictício)
              if (numero % 5 === 1) saidaPorColuna[0]++;
              else if (numero % 5 === 2) saidaPorColuna[1]++;
              else if (numero % 5 === 3) saidaPorColuna[2]++;
              else if (numero % 5 === 4) saidaPorColuna[3]++;
              else if (numero % 5 === 5) saidaPorColuna[4]++;
            });

            const soma = data.numeros.reduce((acc, num) => acc + num, 0);
            const media = soma / data.numeros.length;
            const menor = Math.min(...data.numeros);
            const maior = Math.max(...data.numeros);
            const pares = data.numeros.filter(num => num % 2 === 0).length;
            const impares = data.numeros.filter(num => num % 2 !== 0).length;

            relatorioContainer.innerHTML = `
              <h3>📊 Relatório Completo:</h3>
              <ul>
                <li>Total de Dezenas: ${data.numeros.length}</li>
                <li>Pares: ${pares}</li>
                <li>Ímpares: ${impares}</li>
                <li>Soma Total: ${soma}</li>
                <li>Média: ${media.toFixed(2)}</li>
                <li>Menor Dezena: ${menor}</li>
                <li>Maior Dezena: ${maior}</li>
              </ul>

              <h3>📊 Repetição das Dezenas:</h3>
              <ul>
                ${Object.entries(repeticoes).map(([num, count]) => `<li>Dezena ${num}: Repetida ${count} vez(es)</li>`).join('')}
              </ul>

              <h3>📊 Intervalos:</h3>
              <ul>
                <li>1 a 10: ${intervalos[0]} números</li>
                <li>11 a 20: ${intervalos[1]} números</li>
                <li>21 a 30: ${intervalos[2]} números</li>
                <li>31 a 40: ${intervalos[3]} números</li>
                <li>41 a 50: ${intervalos[4]} números</li>
                <li>51 a 60: ${intervalos[5]} números</li>
              </ul>

              <h3>📏 Distribuição nas Colunas:</h3>
              <ul>
                <li>Coluna 1: ${saidaPorColuna[0]} números</li>
                <li>Coluna 2: ${saidaPorColuna[1]} números</li>
                <li>Coluna 3: ${saidaPorColuna[2]} números</li>
                <li>Coluna 4: ${saidaPorColuna[3]} números</li>
                <li>Coluna 5: ${saidaPorColuna[4]} números</li>
              </ul>

              <h3>🎲 Borda do Volante:</h3>
              <div class="volante">
                <div class="coluna">
                  <h4>Coluna 1</h4>
                  ${data.numeros.slice(0, 5).map(num => `<div>${num}</div>`).join('')}
                </div>
                <div class="coluna">
                  <h4>Coluna 2</h4>
                  ${data.numeros.slice(5, 10).map(num => `<div>${num}</div>`).join('')}
                </div>
                <div class="coluna">
                  <h4>Coluna 3</h4>
                  ${data.numeros.slice(10, 15).map(num => `<div>${num}</div>`).join('')}
                </div>
                <div class="coluna">
                  <h4>Coluna 4</h4>
                  ${data.numeros.slice(15, 20).map(num => `<div>${num}</div>`).join('')}
                </div>
                <div class="coluna">
                  <h4>Coluna 5</h4>
                  ${data.numeros.slice(20, 25).map(num => `<div>${num}</div>`).join('')}
                </div>
              </div>

              <h3>🎯 Volante Central:</h3>
              <div class="volante">
                <div class="coluna">
                  ${data.numeros.slice(25, 30).map(num => `<div>${num}</div>`).join('')}
                </div>
                <div class="coluna">
                  ${data.numeros.slice(30, 35).map(num => `<div>${num}</div>`).join('')}
                </div>
              </div>
            `;
          } else {
            alert("Dados inválidos recebidos da API.");
          }
        });
    });
  </script>
</body>
</html>


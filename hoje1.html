<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Resultados Mega-Sena</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #121212;
      color: white;
      margin: 0;
      padding: 20px;
      text-align: center;
    }
    input, button {
      padding: 10px;
      font-size: 16px;
      margin-bottom: 15px;
    }
    .bola {
      display: inline-block;
      width: 50px;
      height: 50px;
      border-radius: 50%;
      line-height: 50px;
      font-weight: bold;
      margin: 5px;
      color: #fff;
    }
    .vermelha { background: #e53935; }
    .amarela { background: #fbc02d; color: #000; }
    .verde { background: #43a047; }
    .marrom { background: #6d4c41; }
    .azul { background: #1e88e5; }
    .rosa { background: #ec407a; }
    .preta { background: #212121; }
    .cinza { background: #9e9e9e; color: #000; }
    .laranja { background: #fb8c00; }

    .sorteio {
      background: #1e1e1e;
      border-radius: 16px;
      padding: 20px;
      margin-top: 20px;
    }

    .titulo-sorteio {
      font-size: 20px;
      margin-bottom: 10px;
      font-weight: bold;
    }

    .relatorio {
      margin-top: 20px;
      text-align: left;
      padding: 15px;
      background: #2b2b2b;
      border-radius: 10px;
    }
    .relatorio h3 {
      text-align: center;
      margin-bottom: 10px;
      font-size: 18px;
      color: #4caf50;
    }
  </style>
</head>
<body>
  <h2>Consulta Mega-Sena</h2>
  <input type="text" id="inputBusca" placeholder="Número do concurso">
  <button id="btnBuscar">Buscar</button>
  <div id="resultado"></div>

  <script>
    const inputBusca = document.getElementById("inputBusca");
    const btnBuscar = document.getElementById("btnBuscar");
    const resultadoDiv = document.getElementById("resultado");

    function corBola(num) {
      const n = Number(num);
      if ([1,11,21,31,41,51].includes(n)) return "vermelha";
      if ([2,12,22,32,42,52].includes(n)) return "amarela";
      if ([3,13,23,33,43,53].includes(n)) return "verde";
      if ([4,14,24,34,44,54].includes(n)) return "marrom";
      if ([5,15,25,35,45,55].includes(n)) return "azul";
      if ([6,16,26,36,46,56].includes(n)) return "rosa";
      if ([7,17,27,37,47,57].includes(n)) return "preta";
      if ([8,18,28,38,48,58].includes(n)) return "cinza";
      if ([9,19,29,39,49,59].includes(n)) return "laranja";
      return "preta";
    }

    function gerarRelatorio(dezenas) {
      const numeros = dezenas.map(Number);
      const pares = numeros.filter(n => n % 2 === 0).length;
      const impares = numeros.length - pares;
      const soma = numeros.reduce((a, b) => a + b, 0);
      const quadrantes = [0, 0, 0, 0];
      numeros.forEach(n => {
        if (n <= 15) quadrantes[0]++;
        else if (n <= 30) quadrantes[1]++;
        else if (n <= 45) quadrantes[2]++;
        else quadrantes[3]++;
      });

      return `
        <div class="relatorio">
          <h3>Relatório Estatístico</h3>
          <p><strong>Pares:</strong> ${pares} | <strong>Ímpares:</strong> ${impares}</p>
          <p><strong>Soma Total:</strong> ${soma}</p>
          <p><strong>Quadrantes:</strong></p>
          <ul>
            <li>1 a 15: ${quadrantes[0]}</li>
            <li>16 a 30: ${quadrantes[1]}</li>
            <li>31 a 45: ${quadrantes[2]}</li>
            <li>46 a 60: ${quadrantes[3]}</li>
          </ul>
        </div>
      `;
    }

    async function buscarConcurso(numero) {
      try {
        const response = await fetch(`https://premium-portaldeloteriasmacpoint.onrender.com/api.php?concurso=${numero}`);
        const dados = await response.json();
        if (!dados || !dados.dezenas || dados.dezenas.length !== 6) return null;

        return {
          numero: dados.numero,
          data: dados.data,
          dezenas: dados.dezenas
        };
      } catch (err) {
        return null;
      }
    }

    btnBuscar.addEventListener("click", async () => {
      const numero = inputBusca.value.trim();
      resultadoDiv.innerHTML = "";

      if (numero === "") return;

      const concurso = await buscarConcurso(numero);

      if (!concurso) {
        resultadoDiv.innerHTML = `<div class="sorteio"><div class="titulo-sorteio">Concurso ${numero} não encontrado.</div></div>`;
        return;
      }

      const bolasHtml = concurso.dezenas.map(num => {
        const cor = corBola(num);
        return `<div class="bola ${cor}">${num.toString().padStart(2, '0')}</div>`;
      }).join("");

      resultadoDiv.innerHTML = `
        <div class="sorteio">
          <div class="titulo-sorteio">Concurso ${concurso.numero} - ${concurso.data}</div>
          <div class="numeros">${bolasHtml}</div>
          ${gerarRelatorio(concurso.dezenas)}
        </div>
      `;
    });
  </script>
</body>
</html>



<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Relatório de Atrasos</title>
  <style>
    body {
      background-color: #001a12;
      color: white;
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 20px;
    }

    h1 {
      text-align: center;
      color: white;
      text-shadow: 2px 2px 0 black;
    }

    .filtros {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 10px;
      margin: 20px 0;
    }

    select, button {
      padding: 10px;
      font-size: 16px;
      border-radius: 5px;
      border: none;
    }

    button {
      background-color: #00cc66;
      color: white;
      cursor: pointer;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
    }

    th, td {
      border: 1px solid white;
      padding: 10px;
      text-align: center;
    }

    th {
      background-color: #003322;
    }

    tr:nth-child(even) {
      background-color: #004d33;
    }

    tr:nth-child(odd) {
      background-color: #003d2b;
    }

    @media (max-width: 600px) {
      table, th, td {
        font-size: 12px;
      }

      .filtros {
        flex-direction: column;
        align-items: center;
      }
    }
  </style>
</head>
<body>

  <h1>Relatório de Atrasos</h1>

  <div class="filtros">
    <label>
      Tipo:
      <select id="tipoFiltro">
        <option value="semilinhas">Semilinhas</option>
        <option value="semicolunas">Semicolunas</option>
        <option value="linhas">Linhas</option>
        <option value="colunas">Colunas</option>
      </select>
    </label>

    <label>
      Concursos:
      <select id="concursosFiltro">
        <option value="10">Últimos 10</option>
        <option value="20">Últimos 20</option>
        <option value="50">Últimos 50</option>
        <option value="100">Últimos 100</option>
      </select>
    </label>

    <button onclick="gerarRelatorio()">Gerar Relatório</button>
  </div>

  <div id="resultado"></div>

  <script src="base.js"></script>
  <script>
    function gerarRelatorio() {
      const tipo = document.getElementById("tipoFiltro").value;
      const qtd = parseInt(document.getElementById("concursosFiltro").value);
      const mapa = padroes[tipo];
      let contagem = {};

      for (let grupo in mapa) contagem[grupo] = 0;

      for (let i = 0; i < Math.min(qtd, dados.length); i++) {
        let concurso = dados[i];
        for (let grupo in mapa) {
          let lista = mapa[grupo];
          concurso.forEach(n => {
            if (lista.includes(n)) contagem[grupo]++;
          });
        }
      }

      let total = qtd * 6;
      let html = `<h2 style="text-align:center">${tipo.toUpperCase()} - Últimos ${qtd} Concursos</h2>`;
      html += `<table><tr><th>Grupo</th><th>Ocorrências</th><th>%</th></tr>`;

      for (let grupo in contagem) {
        let valor = contagem[grupo];
        let perc = ((valor / total) * 100).toFixed(2);
        html += `<tr><td>${grupo}</td><td>${valor}</td><td>${perc}%</td></tr>`;
      }

      html += `</table>`;
      document.getElementById("resultado").innerHTML = html;
    }

    window.onload = gerarRelatorio;
  </script>
</body>
</html>

